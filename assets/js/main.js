var addButton=document.getElementById('add');var inputTask=document.getElementById('new-task');var unfinishedTasks=document.getElementById('unfinished-tasks');var finishedTasks=document.getElementById('finished-tasks');function createNewElement(task,finished){var listItem=document.createElement('li');var checkbox=document.createElement('button');if(finished){checkbox.className="icons checkbox";checkbox.innerHTML="<i class='icons'>check_box</i>";}else{checkbox.className="icons checkbox";checkbox.innerHTML="<i class='icons'>check_box_outline_blank</i>";}var label=document.createElement('label');label.innerText=task;var input=document.createElement('input');input.type="text";var editButton=document.createElement('button');editButton.className="icons edit";editButton.innerHTML="<i class='icons'>edit</i>";var deleteButton=document.createElement('button');deleteButton.className="icons delete";deleteButton.innerHTML="<i class='icons'>delete</i>";listItem.appendChild(checkbox);listItem.appendChild(label);listItem.appendChild(input);listItem.appendChild(deleteButton);listItem.appendChild(editButton);return listItem;}function addTask(){if(inputTask.value){var listItem=createNewElement(inputTask.value,false);unfinishedTasks.appendChild(listItem);bindTaskEvents(listItem,finishTask);inputTask.value="";}save();}addButton.onclick=addTask;function deleteTask(){var listItem=this.parentNode;var ul=listItem.parentNode;ul.removeChild(listItem);save();}function editTask(){console.log(2);var editButton=this;var listItem=this.parentNode;var label=listItem.querySelector('label');var input=listItem.querySelector('input[type=text]');var containsClass=listItem.classList.contains('editMode');if(containsClass){label.innerText=input.value;editButton.className="icons edit";editButton.innerHTML="<i class='icons'>edit</i>";save();}else{input.value=label.innerText;editButton.className="icons save";editButton.innerHTML="<i class='icons'>save</i>";}listItem.classList.toggle('editMode');}function finishTask(){var listItem=this.parentNode;var checkbox=listItem.querySelector('button.checkbox');checkbox.className="icons checkbox";checkbox.innerHTML="<i class='icons'>check_box</i>";finishedTasks.appendChild(listItem);bindTaskEvents(listItem,unfinishTask);save();}function unfinishTask(){var listItem=this.parentNode;var checkbox=listItem.querySelector('button.checkbox');checkbox.className="icons checkbox";checkbox.innerHTML="<i class='icons'>check_box_outline_blank</i>";unfinishedTasks.appendChild(listItem);bindTaskEvents(listItem,finishTask);save();}function bindTaskEvents(listItem,checkboxEvent){var checkbox=listItem.querySelector('button.checkbox');var editButton=listItem.querySelector('button.edit');var deleteButton=listItem.querySelector('button.delete');checkbox.onclick=checkboxEvent;editButton.onclick=editTask;deleteButton.onclick=deleteTask;}function save(){var unfinishedTasksArr=[];for(var i=0;i<unfinishedTasks.children.length;i++){unfinishedTasksArr.push(unfinishedTasks.children[i].getElementsByTagName('label')[0].innerText);}var finishedTasksArr=[];for(var i=0;i<finishedTasks.children.length;i++){finishedTasksArr.push(finishedTasks.children[i].getElementsByTagName('label')[0].innerText);}localStorage.removeItem('todo');localStorage.setItem('todo',JSON.stringify({unfinishedTasks:unfinishedTasksArr,finishedTasks:finishedTasksArr}));}function load(){return JSON.parse(localStorage.getItem('todo'));}var data=load();for(var i=0;i<data.unfinishedTasks.length;i++){var listItem=createNewElement(data.unfinishedTasks[i],false);unfinishedTasks.appendChild(listItem);bindTaskEvents(listItem,finishTask);}for(var i=0;i<data.finishedTasks.length;i++){var listItem=createNewElement(data.finishedTasks[i],true);finishedTasks.appendChild(listItem);bindTaskEvents(listItem,unfinishTask);}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYWRkQnV0dG9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlucHV0VGFzayIsInVuZmluaXNoZWRUYXNrcyIsImZpbmlzaGVkVGFza3MiLCJjcmVhdGVOZXdFbGVtZW50IiwidGFzayIsImZpbmlzaGVkIiwibGlzdEl0ZW0iLCJjcmVhdGVFbGVtZW50IiwiY2hlY2tib3giLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJsYWJlbCIsImlubmVyVGV4dCIsImlucHV0IiwidHlwZSIsImVkaXRCdXR0b24iLCJkZWxldGVCdXR0b24iLCJhcHBlbmRDaGlsZCIsImFkZFRhc2siLCJ2YWx1ZSIsImJpbmRUYXNrRXZlbnRzIiwiZmluaXNoVGFzayIsInNhdmUiLCJvbmNsaWNrIiwiZGVsZXRlVGFzayIsInBhcmVudE5vZGUiLCJ1bCIsInJlbW92ZUNoaWxkIiwiZWRpdFRhc2siLCJjb25zb2xlIiwibG9nIiwicXVlcnlTZWxlY3RvciIsImNvbnRhaW5zQ2xhc3MiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInRvZ2dsZSIsInVuZmluaXNoVGFzayIsImNoZWNrYm94RXZlbnQiLCJ1bmZpbmlzaGVkVGFza3NBcnIiLCJpIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJwdXNoIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJmaW5pc2hlZFRhc2tzQXJyIiwibG9jYWxTdG9yYWdlIiwicmVtb3ZlSXRlbSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwibG9hZCIsInBhcnNlIiwiZ2V0SXRlbSIsImRhdGEiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLENBQUFBLFNBQVMsQ0FBR0MsUUFBUSxDQUFDQyxjQUFULENBQXdCLEtBQXhCLENBQWhCLENBQ0EsR0FBSUMsQ0FBQUEsU0FBUyxDQUFHRixRQUFRLENBQUNDLGNBQVQsQ0FBd0IsVUFBeEIsQ0FBaEIsQ0FDQSxHQUFJRSxDQUFBQSxlQUFlLENBQUdILFFBQVEsQ0FBQ0MsY0FB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Q0FBQ0gsZ0JBQWdCLENBQUNrRCxJQUFJLENBQUNuRCxhQUFMLENBQW1CcUMsQ0FBbkIsQ0FBRCxDQUF3QixJQUF4QixDQUE3QixDQUNBckMsYUFBYSxDQUFDZSxXQUFkLENBQTBCWCxRQUExQixFQUNBYyxjQUFjLENBQUNkLFFBQUQsQ0FBVzhCLFlBQVgsQ0FBZCxDQUNEIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYWRkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZCcpO1xyXG52YXIgaW5wdXRUYXNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy10YXNrJyk7XHJcbnZhciB1bmZpbmlzaGVkVGFza3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndW5maW5pc2hlZC10YXNrcycpO1xyXG52YXIgZmluaXNoZWRUYXNrcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaW5pc2hlZC10YXNrcycpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU5ld0VsZW1lbnQodGFzaywgZmluaXNoZWQpIHtcclxuICB2YXIgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gIHZhciBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG5cclxuICBpZihmaW5pc2hlZCl7XHJcbiAgICBjaGVja2JveC5jbGFzc05hbWUgPSBcImljb25zIGNoZWNrYm94XCI7XHJcbiAgICBjaGVja2JveC5pbm5lckhUTUwgPSBcIjxpIGNsYXNzPSdpY29ucyc+Y2hlY2tfYm94PC9pPlwiO1xyXG4gIH1lbHNlIHtcclxuICAgIGNoZWNrYm94LmNsYXNzTmFtZSA9IFwiaWNvbnMgY2hlY2tib3hcIjtcclxuICAgIGNoZWNrYm94LmlubmVySFRNTCA9IFwiPGkgY2xhc3M9J2ljb25zJz5jaGVja19ib3hfb3V0bGluZV9ibGFuazwvaT5cIjtcclxuICB9XHJcblxyXG5cclxuICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gIGxhYmVsLmlubmVyVGV4dCA9IHRhc2s7XHJcbiAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICBpbnB1dC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgdmFyIGVkaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICBlZGl0QnV0dG9uLmNsYXNzTmFtZSA9IFwiaWNvbnMgZWRpdFwiO1xyXG4gIGVkaXRCdXR0b24uaW5uZXJIVE1MID0gXCI8aSBjbGFzcz0naWNvbnMnPmVkaXQ8L2k+XCI7XHJcbiAgdmFyIGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gIGRlbGV0ZUJ1dHRvbi5jbGFzc05hbWUgPSBcImljb25zIGRlbGV0ZVwiO1xyXG4gIGRlbGV0ZUJ1dHRvbi5pbm5lckhUTUwgPSBcIjxpIGNsYXNzPSdpY29ucyc+ZGVsZXRlPC9pPlwiO1xyXG5cclxuICBsaXN0SXRlbS5hcHBlbmRDaGlsZChjaGVja2JveCk7XHJcbiAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gIGxpc3RJdGVtLmFwcGVuZENoaWxkKGlucHV0KTtcclxuICBsaXN0SXRlbS5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xyXG4gIGxpc3RJdGVtLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xyXG5cclxuICByZXR1cm4gbGlzdEl0ZW07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFRhc2soKSB7XHJcbiAgaWYgKGlucHV0VGFzay52YWx1ZSkge1xyXG4gICAgdmFyIGxpc3RJdGVtID0gY3JlYXRlTmV3RWxlbWVudChpbnB1dFRhc2sudmFsdWUsIGZhbHNlKTtcclxuICAgIHVuZmluaXNoZWRUYXNrcy5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XHJcbiAgICBiaW5kVGFza0V2ZW50cyhsaXN0SXRlbSwgZmluaXNoVGFzaylcclxuICAgIGlucHV0VGFzay52YWx1ZSA9IFwiXCI7XHJcbiAgfVxyXG4gIHNhdmUoKTtcclxufVxyXG5hZGRCdXR0b24ub25jbGljayA9IGFkZFRhc2s7XHJcblxyXG5mdW5jdGlvbiBkZWxldGVUYXNrKCkge1xyXG4gIHZhciBsaXN0SXRlbSA9IHRoaXMucGFyZW50Tm9kZTtcclxuICB2YXIgdWwgPSBsaXN0SXRlbS5wYXJlbnROb2RlO1xyXG4gIHVsLnJlbW92ZUNoaWxkKGxpc3RJdGVtKTtcclxuICBzYXZlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVkaXRUYXNrKCkge1xyXG4gIGNvbnNvbGUubG9nKDIpO1xyXG4gIHZhciBlZGl0QnV0dG9uID0gdGhpcztcclxuICB2YXIgbGlzdEl0ZW0gPSB0aGlzLnBhcmVudE5vZGU7XHJcbiAgdmFyIGxhYmVsID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignbGFiZWwnKTtcclxuICB2YXIgaW5wdXQgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPXRleHRdJyk7XHJcblxyXG4gIHZhciBjb250YWluc0NsYXNzID0gbGlzdEl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0TW9kZScpO1xyXG5cclxuICBpZiAoY29udGFpbnNDbGFzcykge1xyXG4gICAgbGFiZWwuaW5uZXJUZXh0ID0gaW5wdXQudmFsdWU7XHJcbiAgICBlZGl0QnV0dG9uLmNsYXNzTmFtZSA9IFwiaWNvbnMgZWRpdFwiO1xyXG4gICAgZWRpdEJ1dHRvbi5pbm5lckhUTUwgPSBcIjxpIGNsYXNzPSdpY29ucyc+ZWRpdDwvaT5cIjtcclxuICAgIHNhdmUoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaW5wdXQudmFsdWUgPSBsYWJlbC5pbm5lclRleHQ7XHJcbiAgICBlZGl0QnV0dG9uLmNsYXNzTmFtZSA9IFwiaWNvbnMgc2F2ZVwiO1xyXG4gICAgZWRpdEJ1dHRvbi5pbm5lckhUTUwgPSBcIjxpIGNsYXNzPSdpY29ucyc+c2F2ZTwvaT5cIjtcclxuXHJcbiAgfVxyXG4gIGxpc3RJdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2VkaXRNb2RlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbmlzaFRhc2soKSB7XHJcbiAgdmFyIGxpc3RJdGVtID0gdGhpcy5wYXJlbnROb2RlO1xyXG4gIHZhciBjaGVja2JveCA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi5jaGVja2JveCcpO1xyXG4gIGNoZWNrYm94LmNsYXNzTmFtZSA9IFwiaWNvbnMgY2hlY2tib3hcIjtcclxuICBjaGVja2JveC5pbm5lckhUTUwgPSBcIjxpIGNsYXNzPSdpY29ucyc+Y2hlY2tfYm94PC9pPlwiO1xyXG4gIGZpbmlzaGVkVGFza3MuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xyXG4gIGJpbmRUYXNrRXZlbnRzKGxpc3RJdGVtLCB1bmZpbmlzaFRhc2spO1xyXG4gIHNhdmUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdW5maW5pc2hUYXNrKCkge1xyXG4gIHZhciBsaXN0SXRlbSA9IHRoaXMucGFyZW50Tm9kZTtcclxuICB2YXIgY2hlY2tib3ggPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdidXR0b24uY2hlY2tib3gnKTtcclxuICBjaGVja2JveC5jbGFzc05hbWUgPSBcImljb25zIGNoZWNrYm94XCI7XHJcbiAgY2hlY2tib3guaW5uZXJIVE1MID0gXCI8aSBjbGFzcz0naWNvbnMnPmNoZWNrX2JveF9vdXRsaW5lX2JsYW5rPC9pPlwiO1xyXG5cclxuICB1bmZpbmlzaGVkVGFza3MuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xyXG4gIGJpbmRUYXNrRXZlbnRzKGxpc3RJdGVtLCBmaW5pc2hUYXNrKVxyXG4gIHNhdmUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFRhc2tFdmVudHMobGlzdEl0ZW0sIGNoZWNrYm94RXZlbnQpIHtcclxuICB2YXIgY2hlY2tib3ggPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdidXR0b24uY2hlY2tib3gnKTtcclxuICB2YXIgZWRpdEJ1dHRvbiA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi5lZGl0Jyk7XHJcbiAgdmFyIGRlbGV0ZUJ1dHRvbiA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi5kZWxldGUnKTtcclxuXHJcbiAgY2hlY2tib3gub25jbGljayA9IGNoZWNrYm94RXZlbnQ7XHJcbiAgZWRpdEJ1dHRvbi5vbmNsaWNrID0gZWRpdFRhc2s7XHJcbiAgZGVsZXRlQnV0dG9uLm9uY2xpY2sgPSBkZWxldGVUYXNrO1xyXG5cclxufVxyXG5mdW5jdGlvbiBzYXZlKCkge1xyXG5cclxuICB2YXIgdW5maW5pc2hlZFRhc2tzQXJyID0gW107XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmZpbmlzaGVkVGFza3MuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgIHVuZmluaXNoZWRUYXNrc0Fyci5wdXNoKHVuZmluaXNoZWRUYXNrcy5jaGlsZHJlbltpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGFiZWwnKVswXS5pbm5lclRleHQpO1xyXG4gIH1cclxuXHJcbiAgdmFyIGZpbmlzaGVkVGFza3NBcnIgPSBbXTtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbmlzaGVkVGFza3MuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgIGZpbmlzaGVkVGFza3NBcnIucHVzaChmaW5pc2hlZFRhc2tzLmNoaWxkcmVuW2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsYWJlbCcpWzBdLmlubmVyVGV4dCk7XHJcbiAgfVxyXG5cclxuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9kbycpO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvJywgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgdW5maW5pc2hlZFRhc2tzOiB1bmZpbmlzaGVkVGFza3NBcnIsXHJcbiAgICBmaW5pc2hlZFRhc2tzOiBmaW5pc2hlZFRhc2tzQXJyXHJcbiAgfSkpO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZCgpe1xyXG4gIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2RvJykpO1xyXG59XHJcblxyXG52YXIgZGF0YT1sb2FkKCk7XHJcblxyXG5mb3IodmFyIGk9MDsgaTxkYXRhLnVuZmluaXNoZWRUYXNrcy5sZW5ndGg7aSsrKXtcclxuICB2YXIgbGlzdEl0ZW09Y3JlYXRlTmV3RWxlbWVudChkYXRhLnVuZmluaXNoZWRUYXNrc1tpXSwgZmFsc2UpO1xyXG4gIHVuZmluaXNoZWRUYXNrcy5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XHJcbiAgYmluZFRhc2tFdmVudHMobGlzdEl0ZW0sIGZpbmlzaFRhc2spO1xyXG59XHJcblxyXG5mb3IodmFyIGk9MDsgaTxkYXRhLmZpbmlzaGVkVGFza3MubGVuZ3RoOyBpKyspe1xyXG4gIHZhciBsaXN0SXRlbT1jcmVhdGVOZXdFbGVtZW50KGRhdGEuZmluaXNoZWRUYXNrc1tpXSwgdHJ1ZSk7XHJcbiAgZmluaXNoZWRUYXNrcy5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XHJcbiAgYmluZFRhc2tFdmVudHMobGlzdEl0ZW0sIHVuZmluaXNoVGFzayk7XHJcbn1cclxuIl19
